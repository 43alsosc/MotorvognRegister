<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>motorvognregister</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body >

  <h1 >Kunde</h1>

    <label for="navn" >Eiers navn:</label>
    <input type="text" id="navn" >

    <label for="personnummer" >Eiers Personnummer:</label>
    <input type="number" id="personnummer" >

    <label for="adresse" >Eiers adresse:</label>
    <input type="text" id="adresse" >

    <label for="kjennetegn" >Kjennetegn:</label>
    <input type="text" id="kjennetegn" >

    <label for="bilmerke" >Bilmerke:</label>
    <input type="text" id="bilmerke" >

    <label for="biltype" >Bil Type:</label>
    <input type="text" id="biltype" >

  <button onclick="lagreMotorvogn()" >Registrer</button>


  <div id="motorvognene" ></div>

  <button onclick="slettAlleMotorvogner()" >Slett registrerte</button>

<script type="application/javascript">
  function lagreMotorvogn() {
    const motorvogn = {
      navn: $("#navn").val(),
      personnummer: $("#personnummer").val(),
      adresse: $("#adresse").val(),
      kjennetegn: $("#kjennetegn").val(),
      bilmerke: $("#bilmerke").val(),
      biltype: $("#biltype").val()
    };

    $.post("/lagre", motorvogn, function () {
      hentAlleMotorvogner();
    });

    $("#navn").val("");
    $("#personnummer").val("");
    $("#adresse").val("");
    $("#kjennetegn").val("");
    $("#bilmerke").val("");
    $("#biltype").val("");
  }

  function hentAlleMotorvogner() {
    $.get("/hentAlle", function (data) {
      formaterData(data);
    });
  }

  function formaterData(motorvogner) {
    let ut = "<table><tr><th>Navn</th><th>Personnummer</th><th>Adresse</th><th>Kjennetegn</th><th>Bilmerke</th><th>Bil Type</th></tr>";
    for (const motorvogn of motorvogner) {
      ut += "<tr><td>" + motorvogn.navn + "</td><td>" + motorvogn.personnummer + "</td><td>" + motorvogn.adresse + "</td><td>" + motorvogn.kjennetegn + "</td><td>" + motorvogn.bilmerke + "</td><td>" + motorvogn.biltype + "</td></tr>";
    }
    ut += "</table>";
    $("#motorvognene").html(ut);
  }

  function slettAlleMotorvogner() {
    $.get("/slettAlle", function(){
      hentAlleMotorvogner();
    });
  }
</script>
</body>
</html>